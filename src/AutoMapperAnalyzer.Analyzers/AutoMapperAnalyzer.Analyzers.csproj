<Project Sdk="Microsoft.NET.Sdk">
    <PropertyGroup>
        <TargetFramework>netstandard2.0</TargetFramework>
        <ImplicitUsings>enable</ImplicitUsings>
        <Nullable>enable</Nullable>
        <LangVersion>latest</LangVersion>
        <GenerateDocumentationFile>true</GenerateDocumentationFile>
        <EnforceExtendedAnalyzerRules>true</EnforceExtendedAnalyzerRules>
        <!-- Analyzer Package Configuration -->
        <IncludeBuildOutput>false</IncludeBuildOutput>
        <GeneratePackageOnBuild>false</GeneratePackageOnBuild>
        <DevelopmentDependency>true</DevelopmentDependency>
        <PrivateAssets>all</PrivateAssets>
        <!-- NuGet Package Metadata -->
        <PackageId>AutoMapperAnalyzer.Analyzers</PackageId>
        <!-- Semantic Versioning: Version is set by release workflow via /p:PackageVersion=X.Y.Z -->
        <!-- Fallback for local builds: 2.0.YYYYMMDD-local -->
        <MajorVersion>2</MajorVersion>
        <MinorVersion>24</MinorVersion>
        <PatchVersion>0</PatchVersion>
        <BuildNumber Condition="'$(BuildNumber)' == ''"
        >$([System.DateTime]::Now.ToString('yyyyMMdd'))
        </BuildNumber
        >
        <PackageVersion Condition="'$(PackageVersion)' == ''">$(MajorVersion).$(MinorVersion).$(PatchVersion)</PackageVersion>
        <Title>AutoMapper Roslyn Analyzer</Title>
        <Authors>George Wall</Authors>
        <Description>Catch AutoMapper configuration errors at compile-time before they cause runtime chaos! This Roslyn analyzer detects type mismatches, nullable issues, missing properties, collection incompatibilities, and complex mapping problems - all with intelligent code fixes. Transform AutoMapper development from reactive debugging to proactive prevention. Features 13 analyzer rules with smart fixes for type safety, data integrity, complex mappings, performance, and configuration. Compatible with .NET Framework 4.8+, .NET 6.0+, 8.0+, 9.0+, 10.0+.</Description>
        <PackageTags>roslyn;analyzer;automapper;mapping;static-analysis;codeanalysis;code-quality;diagnostics;code-fix;type-safety;compile-time;netframework;netcore;dotnet;dotnet6;dotnet8;dotnet9;dotnet10</PackageTags>
        <PackageLicenseExpression>MIT</PackageLicenseExpression>
        <PackageProjectUrl>https://github.com/georgepwall1991/automapper-analyser</PackageProjectUrl>
        <RepositoryUrl>https://github.com/georgepwall1991/automapper-analyser</RepositoryUrl>
        <RepositoryType>git</RepositoryType>
        <PackageRequireLicenseAcceptance>false</PackageRequireLicenseAcceptance>
        <PackageReleaseNotes>Version 2.24.0 - Bug Fixes and Test Coverage Improvement

            Bug Fixes:
            - Fixed AM011 chunked bulk fix producing placeholder code instead of valid ForMember calls
            - Fixed AM004 FindCreateMapInvocation not traversing up syntax tree for ReverseMap scenarios

            Test Coverage:
            - Added 32 new tests (554 → 586 passing, 12 skipped)
            - New FuzzyMatchHelper unit tests (19 tests for Levenshtein distance and fuzzy matching)
            - New AutoMapperAnalysisHelpers tests for GetLambdaBody and GetTypeName (6 tests)
            - AM004 ReverseMap code fix regression tests (2 tests)
            - AM006 edge case and ReverseMap code fix tests (4 tests)
            - AM011 chunked bulk fix regression test (1 test)

            Previous Release: v2.23.0 - Project Audit
        </PackageReleaseNotes>
        <PackageReadmeFile>README.md</PackageReadmeFile>
        <PackageIcon>icon.png</PackageIcon>
        <!-- Remove strict PackageType for broader compatibility -->
        <NoPackageAnalysis>true</NoPackageAnalysis>
        <NoWarn>$(NoWarn);RS1038;RS2008</NoWarn>
    </PropertyGroup>
    <ItemGroup>
        <PackageReference
                Include="Microsoft.CodeAnalysis.Analyzers"
                Version="4.14.0"
                PrivateAssets="all"
        />
        <PackageReference Include="Microsoft.CodeAnalysis.CSharp" Version="5.0.0" PrivateAssets="all"/>
        <PackageReference Include="Microsoft.CodeAnalysis.CSharp.Workspaces" Version="5.0.0" PrivateAssets="all"/>
        <PackageReference Include="Microsoft.CodeAnalysis.Workspaces.Common" Version="5.0.0" PrivateAssets="all"/>
    </ItemGroup>
    <ItemGroup>
        <None Include="..\..\README.md" Pack="true" PackagePath="\"/>
        <None Include="..\..\icon.png" Pack="true" PackagePath="\"/>
    </ItemGroup>
    <!-- Analyzer files for NuGet package -->
    <ItemGroup>
        <None
                Include="bin\$(Configuration)\$(TargetFramework)\$(AssemblyName).dll"
                Pack="true"
                PackagePath="analyzers\dotnet\cs\$(AssemblyName).dll"
                Visible="false"
        />
        <None
                Include="bin\$(Configuration)\$(TargetFramework)\$(AssemblyName).dll"
                Pack="true"
                PackagePath="analyzers\dotnet\$(AssemblyName).dll"
                Visible="false"
        />
    </ItemGroup>
</Project>
