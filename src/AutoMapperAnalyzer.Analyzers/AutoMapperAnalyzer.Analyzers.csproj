<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>netstandard2.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <LangVersion>latest</LangVersion>
    <GenerateDocumentationFile>true</GenerateDocumentationFile>
    <EnforceExtendedAnalyzerRules>true</EnforceExtendedAnalyzerRules>
    <!-- Analyzer Package Configuration -->
    <IncludeBuildOutput>false</IncludeBuildOutput>
    <GeneratePackageOnBuild>false</GeneratePackageOnBuild>
    <DevelopmentDependency>true</DevelopmentDependency>
    <PrivateAssets>all</PrivateAssets>
    <!-- NuGet Package Metadata -->
    <PackageId>AutoMapperAnalyzer.Analyzers</PackageId>
    <!-- Semantic Versioning: Version is set by release workflow via /p:PackageVersion=X.Y.Z -->
    <!-- Fallback for local builds: 2.0.YYYYMMDD-local -->
    <MajorVersion>2</MajorVersion>
    <MinorVersion>1</MinorVersion>
    <BuildNumber Condition="'$(BuildNumber)' == ''"
      >$([System.DateTime]::Now.ToString('yyyyMMdd'))</BuildNumber
    >
    <PackageVersion Condition="'$(PackageVersion)' == ''">$(MajorVersion).$(MinorVersion).$(BuildNumber)-local</PackageVersion>
    <Title>AutoMapper Roslyn Analyzer</Title>
    <Authors>George Wall</Authors>
    <Description>Catch AutoMapper configuration errors at compile-time before they cause runtime chaos! This Roslyn analyzer detects type mismatches, nullable issues, missing properties, collection incompatibilities, and complex mapping problems - all with intelligent code fixes. Transform AutoMapper development from reactive debugging to proactive prevention. Features 10 analyzer rules with smart fixes for type safety, data integrity, and complex mappings. Compatible with .NET Framework 4.8+, .NET 6.0+, 8.0+, and 9.0+.</Description>
    <PackageTags>roslyn;analyzer;automapper;mapping;static-analysis;codeanalysis;code-quality;diagnostics;code-fix;type-safety;compile-time;netframework;netcore;dotnet;dotnet6;dotnet8;dotnet9</PackageTags>
    <PackageLicenseExpression>MIT</PackageLicenseExpression>
    <PackageProjectUrl>https://github.com/georgepwall1991/automapper-analyser</PackageProjectUrl>
    <RepositoryUrl>https://github.com/georgepwall1991/automapper-analyser</RepositoryUrl>
    <RepositoryType>git</RepositoryType>
    <PackageRequireLicenseAcceptance>false</PackageRequireLicenseAcceptance>
    <PackageReleaseNotes>Version 2.1.0 - Enhanced AM020 Nested Object Mapping Analyzer

✨ New Features:
• Internal property support: AM020 now detects nested object mappings for internal properties
• Cross-profile mapping detection: Recognizes mappings defined in different Profile classes
• Mixed visibility scenarios: Handles classes with both public and internal properties

📦 Improvements:
• Enhanced GetExistingMappings to search across all Profile classes in the same file
• Improved AutoMapperAnalysisHelpers to support internal property visibility
• 374 passing tests (60 AM020 tests, +1 new test for mixed scenarios)

Previous Release (2.0.0):
• 10 comprehensive analyzer rules (AM001-AM030)
• Intelligent code fixes for all diagnostics
• Complete type safety, data integrity, and complex mapping analysis
• Cross-platform support (.NET Framework 4.8+, .NET 6+, 8+, 9+)

📚 Documentation:
• Comprehensive README with real-world examples
• 248-line samples guide with usage patterns
• Full diagnostic rules reference

🔗 Full Release Notes: https://github.com/georgepwall1991/automapper-analyser/releases/tag/v2.0.0</PackageReleaseNotes>
    <PackageReadmeFile>README.md</PackageReadmeFile>
    <PackageIcon>icon.png</PackageIcon>
    <!-- Remove strict PackageType for broader compatibility -->
    <NoPackageAnalysis>true</NoPackageAnalysis>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference
      Include="Microsoft.CodeAnalysis.Analyzers"
      Version="4.14.0"
      PrivateAssets="all"
    />
    <PackageReference
      Include="Microsoft.CodeAnalysis.CSharp"
      Version="4.14.0"
      PrivateAssets="all"
    />
    <PackageReference
      Include="Microsoft.CodeAnalysis.CSharp.Workspaces"
      Version="4.14.0"
      PrivateAssets="all"
    />
    <PackageReference
      Include="Microsoft.CodeAnalysis.Workspaces.Common"
      Version="4.14.0"
      PrivateAssets="all"
    />
  </ItemGroup>
  <ItemGroup>
    <None Include="..\..\README.md" Pack="true" PackagePath="\" />
    <None Include="..\..\icon.png" Pack="true" PackagePath="\" />
  </ItemGroup>
  <!-- Analyzer files for NuGet package -->
  <ItemGroup>
    <None
      Include="bin\$(Configuration)\$(TargetFramework)\$(AssemblyName).dll"
      Pack="true"
      PackagePath="analyzers\dotnet\cs\$(AssemblyName).dll"
      Visible="false"
    />
    <None
      Include="bin\$(Configuration)\$(TargetFramework)\$(AssemblyName).dll"
      Pack="true"
      PackagePath="analyzers\dotnet\$(AssemblyName).dll"
      Visible="false"
    />
  </ItemGroup>
</Project>
